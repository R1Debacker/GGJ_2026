[gd_scene format=3 uid="uid://djtraiouswj0s"]

[ext_resource type="PackedScene" uid="uid://2480fobfbgyu" path="res://Assets/Character/SimplifiedCharacter.glb" id="1_k3upo"]

[sub_resource type="GDScript" id="GDScript_k3upo"]
resource_name = "top_view_3d_player"
script/source = "extends CharacterBody3D
class_name player3D_top_view

@export var speed = 5.0
@export var acceration = 4.0
@export var jump_speed = 8.0

#var jumping = false
#var grounded = true

@onready var model := $Skeleton/Skeleton3D
@onready var anim_tree = $AnimationTree
@onready var anim_state = $AnimationTree.get(\"parameters/playback\")

func _physics_process(delta: float):
	# Add the gravity.
	#if not is_on_floor():
		#velocity += get_gravity() * delta

	get_move_input(delta)
	
	move_and_slide()

func get_move_input(delta):
	
	# Get the input direction and handle the movement/deceleration.
	# As good practice, you should replace UI actions with custom gameplay actions.
	
	var dir_z = Input.get_axis(\"top_view_move_down\",\"top_view_move_up\") * Vector3.FORWARD
	var dir_x = Input.get_axis(\"top_view_move_left\",\"top_view_move_right\") * Vector3.RIGHT
	
	var direction = (dir_z + dir_x).normalized()
	
	if direction:
		velocity.x = direction.x * speed
		velocity.z = direction.z * speed
	#else:
		#velocity.x = move_toward(velocity.x, 0, speed)
		#velocity.z = move_toward(velocity.z, 0, speed)
"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_k3upo"]
animation = &"Attack_Kick"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cp6nn"]
animation = &"Death_Forward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7fqn3"]
animation = &"Fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7wd7x"]
animation = &"Run_Forward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_xrb60"]
animation = &"Idle_Look_Around"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_twaat"]
animation = &"Run_Forward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nd16m"]
animation = &"Walk_Forward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0wcok"]
animation = &"Walk_Forward"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_tne0u"]
blend_point_0/node = SubResource("AnimationNodeAnimation_7wd7x")
blend_point_0/pos = 1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_xrb60")
blend_point_1/pos = 0.0
blend_point_2/node = SubResource("AnimationNodeAnimation_twaat")
blend_point_2/pos = -1.0
blend_point_3/node = SubResource("AnimationNodeAnimation_nd16m")
blend_point_3/pos = 0.3
blend_point_4/node = SubResource("AnimationNodeAnimation_0wcok")
blend_point_4/pos = -0.3

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_b2lo3"]
animation = &"Jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_051so"]
animation = &"Jump_End"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6om21"]
animation = &"Jump_Start"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_y4py6"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xio6d"]
advance_mode = 2
advance_condition = &"jumping"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e1imo"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bn233"]
advance_mode = 2
advance_condition = &"grounded"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_j8rhf"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_x2rb6"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lv8mq"]
advance_mode = 2
advance_condition = &"grounded"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5h724"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5m2cu"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xpfbf"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_k3upo"]
states/Attack_Kick/node = SubResource("AnimationNodeAnimation_k3upo")
states/Attack_Kick/position = Vector2(219, -48)
states/Death_Forward/node = SubResource("AnimationNodeAnimation_cp6nn")
states/Death_Forward/position = Vector2(526, -32)
states/Fall/node = SubResource("AnimationNodeAnimation_7fqn3")
states/Fall/position = Vector2(351.5, 220.03125)
states/IDLE-WALK-RUN/node = SubResource("AnimationNodeBlendSpace1D_tne0u")
states/IDLE-WALK-RUN/position = Vector2(346.5, 111.375)
states/Jump/node = SubResource("AnimationNodeAnimation_b2lo3")
states/Jump/position = Vector2(357.5, 313.5)
states/Jump_End/node = SubResource("AnimationNodeAnimation_051so")
states/Jump_End/position = Vector2(512, 220.5625)
states/Jump_Start/node = SubResource("AnimationNodeAnimation_6om21")
states/Jump_Start/position = Vector2(187.5, 221.21875)
states/Start/position = Vector2(134.5, 113.75)
transitions = ["Start", "IDLE-WALK-RUN", SubResource("AnimationNodeStateMachineTransition_y4py6"), "IDLE-WALK-RUN", "Jump_Start", SubResource("AnimationNodeStateMachineTransition_xio6d"), "Jump_Start", "Jump", SubResource("AnimationNodeStateMachineTransition_e1imo"), "Jump", "Jump_End", SubResource("AnimationNodeStateMachineTransition_bn233"), "Jump_End", "IDLE-WALK-RUN", SubResource("AnimationNodeStateMachineTransition_j8rhf"), "IDLE-WALK-RUN", "Fall", SubResource("AnimationNodeStateMachineTransition_x2rb6"), "Fall", "Jump_End", SubResource("AnimationNodeStateMachineTransition_lv8mq"), "IDLE-WALK-RUN", "Death_Forward", SubResource("AnimationNodeStateMachineTransition_5h724"), "IDLE-WALK-RUN", "Attack_Kick", SubResource("AnimationNodeStateMachineTransition_5m2cu"), "Attack_Kick", "IDLE-WALK-RUN", SubResource("AnimationNodeStateMachineTransition_xpfbf")]
graph_offset = Vector2(-50, -52)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_bqdlq"]
radius = 0.201
height = 1.802

[node name="top view 3D Player" unique_id=1032067025 instance=ExtResource("1_k3upo")]
script = SubResource("GDScript_k3upo")

[node name="Skeleton3D" parent="Skeleton" parent_id_path=PackedInt32Array(422943937) index="0" unique_id=597282512]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)
bones/0/position = Vector3(2.1640953e-05, -0.00021558077, 3.368156e-05)
bones/1/position = Vector3(-0.046106305, 0.76390713, 0.06707428)
bones/1/rotation = Quaternion(-0.2528697, 0.14051865, 0.04678372, 0.9560977)
bones/1/scale = Vector3(0.99999994, 1.0000001, 1.000001)
bones/2/position = Vector3(0.09797779, 0.014952495, -0.028238695)
bones/2/rotation = Quaternion(0.66351956, -0.0989171, 0.72035223, -0.17621002)
bones/2/scale = Vector3(0.9999988, 1.0000001, 0.99999994)
bones/3/position = Vector3(-7.0398286e-08, 0.33968922, 9.460053e-08)
bones/3/rotation = Quaternion(0.014107587, -0.007260269, 0.21361572, 0.976789)
bones/3/scale = Vector3(0.9999995, 0.9999994, 1.0000006)
bones/4/position = Vector3(-5.9143997e-07, 0.35952824, 7.066577e-07)
bones/4/rotation = Quaternion(0.3475432, 0.5385969, -0.48927176, 0.59138846)
bones/4/scale = Vector3(0.999999, 1.0000004, 1.0000002)
bones/5/position = Vector3(1.701912e-07, 0.13862485, -3.5443117e-07)
bones/5/rotation = Quaternion(1.0809264e-06, 0.999788, 0.020594891, -3.4575796e-06)
bones/5/scale = Vector3(0.9999994, 1.0000007, 0.99999964)
bones/6/position = Vector3(-1.722363e-07, 0.102547586, 0.056475792)
bones/6/rotation = Quaternion(0.24669702, 0.0050282315, 0.00953146, 0.96903276)
bones/7/position = Vector3(7.1537215e-08, 0.21461923, 3.8668628e-07)
bones/7/rotation = Quaternion(-0.0061996263, 9.826775e-06, -1.4601783e-05, 0.9999808)
bones/7/scale = Vector3(0.9999998, 0.99999976, 0.9999993)
bones/8/position = Vector3(6.1653554e-07, 0.29898962, -0.0016219891)
bones/8/rotation = Quaternion(0.14690168, 0.026338795, 0.046344742, 0.98771375)
bones/8/scale = Vector3(1.0000004, 0.9999989, 1.0000006)
bones/9/position = Vector3(2.514571e-08, 0.0923239, 5.895279e-07)
bones/9/rotation = Quaternion(-0.057252474, 0.078721486, -0.03378706, 0.99467766)
bones/9/scale = Vector3(0.99999994, 1.0000011, 1)
bones/10/position = Vector3(0.032184117, 0.24856421, 0.00080996327)
bones/10/rotation = Quaternion(0.52331066, 0.45552132, 0.5451747, -0.47056448)
bones/10/scale = Vector3(1.0000006, 0.9999993, 1.0000001)
bones/11/position = Vector3(-5.7340525e-08, 0.12703116, -9.1736723e-07)
bones/11/rotation = Quaternion(-0.5383588, 0.13871248, 0.018262854, 0.83102053)
bones/11/scale = Vector3(0.9999996, 0.99999994, 1.0000005)
bones/12/position = Vector3(-2.594657e-09, 0.2920575, 1.697739e-06)
bones/12/rotation = Quaternion(0.22479805, 0.6959087, -0.25169992, 0.6338959)
bones/12/scale = Vector3(1.0000006, 0.99999964, 1.0000004)
bones/13/position = Vector3(-1.2433222e-07, 0.2303402, 3.4457017e-07)
bones/13/rotation = Quaternion(0.00090950914, 0.05950998, -0.21487626, 0.97482616)
bones/13/scale = Vector3(0.9999993, 1.0000006, 0.9999997)
bones/14/position = Vector3(-0.011883053, 0.105741516, 0.038882587)
bones/14/scale = Vector3(0.9999997, 1.0000006, 1.0000004)
bones/15/position = Vector3(3.804954e-08, 0.03901623, -1.0035533e-06)
bones/15/rotation = Quaternion(-1.3137323e-08, -0.008824161, 4.4979316e-08, 0.9999611)
bones/15/scale = Vector3(0.9999995, 0.9999991, 1.0000002)
bones/16/position = Vector3(-0.013650837, 0.10667062, 0.005375613)
bones/16/rotation = Quaternion(0.015756976, 0.7607149, -0.04948219, 0.6470055)
bones/16/scale = Vector3(0.9999992, 0.99999976, 1.0000012)
bones/17/position = Vector3(-4.2726856e-07, 0.04112129, 1.4300713e-07)
bones/17/rotation = Quaternion(-2.1286565e-08, 0.06740804, -7.730725e-10, 0.9977255)
bones/17/scale = Vector3(1.000001, 0.9999995, 0.999999)
bones/18/position = Vector3(-0.011944546, 0.08885911, -0.056342427)
bones/18/rotation = Quaternion(-0.027553942, 0.7103214, -0.12914242, 0.69138014)
bones/18/scale = Vector3(0.9999999, 0.9999991, 1.0000002)
bones/19/position = Vector3(8.6678114e-08, 0.03542411, 1.0900849e-06)
bones/19/rotation = Quaternion(1.8939406e-08, 0.014233041, -1.220234e-08, 0.99989873)
bones/19/scale = Vector3(0.9999995, 1.0000001, 0.9999999)
bones/20/position = Vector3(0.03158429, 0.09564359, -0.0061335503)
bones/20/rotation = Quaternion(0.08764798, 0.6836664, -0.13569675, 0.71169126)
bones/20/scale = Vector3(1.0000002, 1.0000001, 1.0000004)
bones/21/position = Vector3(-0.015764229, 0.09491991, -0.026633378)
bones/21/rotation = Quaternion(0.016826889, 0.74243546, -0.1057057, 0.66131145)
bones/21/scale = Vector3(0.9999998, 1.0000004, 0.99999994)
bones/22/position = Vector3(-3.4082922e-07, 0.047298856, -1.2714061e-07)
bones/22/rotation = Quaternion(-2.2701425e-08, 0.017694857, -1.1148878e-08, 0.99984354)
bones/22/scale = Vector3(0.99999964, 0.99999887, 1.0000008)
bones/23/position = Vector3(0.021662345, 0.04344576, 0.044850916)
bones/23/rotation = Quaternion(0.18863568, 0.9549242, 0.19843511, 0.114716806)
bones/23/scale = Vector3(0.9999996, 1.0000011, 0.99999964)
bones/24/position = Vector3(1.1750456e-06, 0.052412294, -8.6886996e-07)
bones/24/rotation = Quaternion(3.5246867e-08, -0.056428112, 1.7671507e-08, 0.9984067)
bones/24/scale = Vector3(1.0000011, 0.9999994, 1.0000001)
bones/25/position = Vector3(-0.03218403, 0.24856381, 0.00080999907)
bones/25/rotation = Quaternion(-0.52331066, 0.45552132, 0.5451747, 0.47056448)
bones/25/scale = Vector3(1.0000008, 0.9999992, 1)
bones/26/position = Vector3(-1.4606806e-07, 0.12703033, -1.0152323e-06)
bones/26/rotation = Quaternion(-0.5513165, -0.18596645, -0.059600484, 0.81111926)
bones/26/scale = Vector3(0.9999996, 0.9999998, 1.0000006)
bones/27/position = Vector3(-3.8653528e-07, 0.29205686, 2.656851e-06)
bones/27/rotation = Quaternion(0.23213673, -0.69454914, 0.25850174, 0.6299928)
bones/27/scale = Vector3(1.0000001, 1.0000005, 1.0000004)
bones/28/position = Vector3(-9.102457e-07, 0.23034061, -6.524668e-07)
bones/28/rotation = Quaternion(-0.108496636, 0.05505359, 0.098955706, 0.98762614)
bones/28/scale = Vector3(1.0000007, 0.9999995, 0.9999993)
bones/29/position = Vector3(0.011883711, 0.105741836, 0.038882434)
bones/29/rotation = Quaternion(0.06630006, -0.78213257, 0.072603054, 0.61530626)
bones/29/scale = Vector3(1.0000001, 0.9999998, 0.99999946)
bones/30/position = Vector3(4.282043e-07, 0.039015625, -1.1423047e-06)
bones/30/rotation = Quaternion(-1.41528345e-08, 0.0088241575, -5.4516782e-08, 0.9999611)
bones/30/scale = Vector3(1.0000001, 1.0000005, 1.0000002)
bones/31/position = Vector3(0.0136512015, 0.1066704, 0.005376224)
bones/31/rotation = Quaternion(0.015756968, -0.7607149, 0.049482204, 0.6470055)
bones/31/scale = Vector3(1.0000002, 0.9999999, 0.99999964)
bones/32/position = Vector3(-2.4131427e-07, 0.041121956, 4.4323497e-07)
bones/32/rotation = Quaternion(-1.9971186e-08, -0.067408025, 1.066311e-08, 0.9977255)
bones/32/scale = Vector3(1.0000002, 0.9999995, 0.99999934)
bones/33/position = Vector3(0.011944859, 0.088858634, -0.05634238)
bones/33/rotation = Quaternion(-0.027553946, -0.7103214, 0.1291424, 0.69138014)
bones/33/scale = Vector3(1, 0.99999946, 1.0000004)
bones/34/position = Vector3(4.4216142e-07, 0.035424106, 5.139797e-07)
bones/34/rotation = Quaternion(1.4230245e-08, -0.014233039, 1.5860977e-08, 0.99989873)
bones/34/scale = Vector3(1.0000006, 1.0000006, 0.9999997)
bones/35/position = Vector3(-0.031583343, 0.09564293, -0.0061336486)
bones/35/rotation = Quaternion(0.08764796, -0.68366635, 0.13569674, 0.7116913)
bones/35/scale = Vector3(1.0000008, 1.0000006, 0.99999905)
bones/36/position = Vector3(0.015765121, 0.094919465, -0.026632672)
bones/36/rotation = Quaternion(0.016826874, -0.74243546, 0.1057057, 0.66131145)
bones/36/scale = Vector3(1.0000001, 1.0000004, 0.9999992)
bones/37/position = Vector3(2.2626922e-07, 0.04729905, 4.7640606e-07)
bones/37/rotation = Quaternion(-1.5919532e-08, -0.01769484, -3.6345957e-09, 0.99984354)
bones/37/scale = Vector3(1.0000001, 0.9999999, 1.0000006)
bones/38/position = Vector3(-0.021660937, 0.043445192, 0.044851597)
bones/38/rotation = Quaternion(-0.18863566, 0.9549242, 0.19843511, -0.114716835)
bones/38/scale = Vector3(0.9999985, 1.0000014, 1.0000004)
bones/39/position = Vector3(-5.5828065e-07, 0.052412376, -3.2582165e-07)
bones/39/rotation = Quaternion(1.996216e-08, 0.05642812, -2.40369e-08, 0.9984067)
bones/39/scale = Vector3(1.0000011, 0.99999934, 0.9999995)
bones/40/rotation = Quaternion(-0.7785046, -0.12900026, 0.5721867, 0.22336519)
bones/40/scale = Vector3(0.99999815, 0.99999934, 0.99999946)
bones/41/position = Vector3(-1.6373694e-07, 0.33969012, 5.744897e-07)
bones/41/rotation = Quaternion(0.01702407, 0.08423778, -0.21863514, 0.97201484)
bones/41/scale = Vector3(1.0000002, 0.99999934, 1.0000001)
bones/42/position = Vector3(2.2212686e-07, 0.35952795, -1.0994793e-07)
bones/42/rotation = Quaternion(0.41583186, -0.5167762, 0.4720229, 0.5807071)
bones/42/scale = Vector3(0.9999993, 0.9999998, 1.000001)
bones/43/position = Vector3(-1.4050659e-08, 0.13862465, -6.1906027e-09)
bones/43/rotation = Quaternion(-1.3562378e-08, 1, -2.5611252e-08, 6.1544447e-06)
bones/43/scale = Vector3(0.99999994, 0.99999994, 0.99999994)

[node name="AnimationPlayer" parent="." index="1" unique_id=119660854]
speed_scale = 1.5

[node name="AnimationTree" type="AnimationTree" parent="." index="2" unique_id=447910337]
tree_root = SubResource("AnimationNodeStateMachine_k3upo")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/grounded = false
parameters/conditions/jumping = false
parameters/IDLE-WALK-RUN/blend_position = 0.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="3" unique_id=575934891]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9202517, 0)
shape = SubResource("CapsuleShape3D_bqdlq")

[node name="Camera3D" type="Camera3D" parent="." index="4" unique_id=298455434]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, 8, 0)
